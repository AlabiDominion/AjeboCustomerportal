@model AjeboCustomerPortal.Models.Apartment
@using Microsoft.AspNetCore.Http.Extensions
@{
    ViewData["Title"] = Model.Name;

    var returnUrl = Context.Request.GetDisplayUrl();
}
<article class="container">
    <h1>@Model.Name</h1>
    <div class="row"><span class="badge">@Model.City</span><span>@Model.AverageRating.ToString("0.0") ★ (@Model.RatingsCount)</span></div>
    <img src="~/images/@(Model.ImageName ?? "placeholder.jpg")" alt="@Model.Name" style="width:100%;max-width:800px;border-radius:12px;margin:12px 0" />
    <p>@Model.Description</p>
    <div class="price">₦@Model.Price / night</div>

    @if (User.Identity?.IsAuthenticated ?? false)

    {
        <form class="form" asp-action="AddToCart" asp-controller="Apartments" method="post">
            @Html.AntiForgeryToken()
            <input type="hidden" name="ApartmentId" value="@Model.Id" />
            <label>Start date</label>
            <input type="date" name="StartDate" required />
            <label>End date</label>
            <input type="date" name="EndDate" required />
            <button class="btn primary" type="submit">Add to cart</button>
        </form>
    }

    else

    {
        <a class="btn" asp-area="Identity" asp-page="/Account/Login" asp-route-returnUrl="@returnUrl">Login to add to cart</a>
    }
</article>